---
title: mysql常用命令
date: 2017-04-24 15:28:40
tags:
-   mysql
---

#### 1.设置mysql编码

---

    查看原先的编码
    show variables like'character%';
    设置为utf8
    设置默认编码为utf8：
    set names utf8;
    set character_set_client='utf8';
    set character_set_connection='utf8';
    set character_set_results='utf8';

---

#### 2.mysql 重启

---

    service mysqld restart

---

#### 3.数据库导出

---

    命令行下具体用法如下：  mysqldump -u用戶名 -p密码 -d 数据库名 表名 脚本名;
    1、导出数据库为dbname的表结构（其中用戶名为root,密码为dbpasswd,生成的脚本名为db.sql）
    mysqldump -uroot -pdbpasswd -d dbname >db.sql;
    2、导出数据库为dbname某张表(test)结构
    mysqldump -uroot -pdbpasswd -d dbname test>db.sql;
    3、导出数据库为dbname所有表结构及表数据（不加-d）
    mysqldump -uroot -pdbpasswd  dbname >db.sql;
    4、导出数据库為dbname某张表(test)结构及表数据（不加-d）
    mysqldump -uroot -pdbpasswd dbname test>db.sql;
    5. 导出时候带有条件
    mysqldump -uroot -pdbpasswd dbname  test -w"where_condition">db.sql;

---

#### 4.数据库导入

---

    导入数据库
    常用source 命令
    进入mysql数据库控制台,
    如mysql -u root -p
    mysql>use 数据库
    然后使用source命令,后面参数为脚本文件(如这里用到的.sql)
    mysql>source d:wcnc_db.sql
    第二种方式导入
    mysql -uroot -proot -h 127.0.0.1 cms < /root/cms20170207online.sql

---

#### 5.查看connection使用情况

---

    show processlist
    查看最大连接数
    show variables like '%max_connections%';
    设置最大连接数
    set global max_connections=1000;

---

#### 6.配置权限

---

    grant all privileges on cms.* to cms@'cms' identified by 'oupeng_cms';
    flush privileges

---

#### 7.导出查询语句数据 导入到excel 文件中

---

    mysql -h 192.168.5.xx -P 3307 -uxxxx -pxxxx -e
    "SELECT
        sid '广告位id',
        aid	'广告id',
        request	'广告请求',
        dsp_request 'dsp广告请求',
        dsp_response 'dsp广告返回',
        response	'广告返回',
        display	'展示',
        click	'点击',
        d	'日期',
        h '小时'
    from
        ad_bdata.ad_data_monitor
    where
        d BETWEEN 20170210 and 20170216
    ORDER BY d desc, h desc" > monitordata.xls

---

#### 8.待添加。。。。。